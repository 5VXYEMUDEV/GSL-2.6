CMAKE_MINIMUM_REQUIRED (VERSION 3.14)
PROJECT (GSL_Solution C)
SET (CMAKE_C_STANDARD 99)

SET(LIBRARY_OUTPUT_PATH ${PROJECT_BINARY_DIR}/../lib)
IF (MSVC)
    SET (LIBRARY_OUTPUT_PATH ${LIBRARY_OUTPUT_PATH}/${CMAKE_GENERATOR_PLATFORM})
ENDIF ()

ADD_DEFINITIONS( -D HAVE_CONFIG_H )
ADD_DEFINITIONS( -D GSL_RANGE_CHECK )
ADD_DEFINITIONS( -D _LIB )
ADD_DEFINITIONS( -D _CRT_SECURE_NO_DEPRECATE )
ADD_DEFINITIONS( -D _CRT_SECURE_NO_WARNINGS )
ADD_DEFINITIONS( -D _CRT_NONSTDC_NO_WARNINGS )

MESSAGE (STATUS "Solution: " ${CMAKE_PROJECT_NAME})
MESSAGE (STATUS "Dev-Root BINARY dir " ${PROJECT_BINARY_DIR})
MESSAGE (STATUS "Dev-Root SOURCE dir " ${PROJECT_SOURCE_DIR})

include(cmake/Require_CMAKE_BUILD_TYPE.cmake)

SET ( REPO_Dev_DIR ${PROJECT_SOURCE_DIR}/../.. )
SET ( REPO_Src_DIR ${REPO_Dev_DIR}/source )
MESSAGE ( STATUS "REPO_Dev_DIR: " ${REPO_Dev_DIR} )

INCLUDE_DIRECTORIES(
    ${REPO_Dev_DIR}/include
    ${REPO_Dev_DIR}/source
)

IF (MSVC)
    INCLUDE_DIRECTORIES(
        ${REPO_Dev_DIR}/platform/MSVC
    )
ENDIF ()

file(GLOB_RECURSE SRC_LIST_SubSrc_blas ${REPO_Src_DIR}/blas/*.c )
list(REMOVE_ITEM SRC_LIST_SubSrc_blas ${REPO_Src_DIR}/blas/test*.c )

file(GLOB_RECURSE SRC_LIST_SubSrc_block ${REPO_Src_DIR}/block/*.c )
list(FILTER SRC_LIST_SubSrc_block EXCLUDE REGEX ".*test.*")

SET ( SRC_LIST_LIB_GSL
    ${SRC_LIST_SubSrc_blas}
    ${SRC_LIST_SubSrc_block}
)

ADD_LIBRARY( gsl STATIC ${SRC_LIST_LIB_GSL} )
